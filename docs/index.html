<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A package for extracting data from the oliver sms replica and creating measurements • Color Palettes from Node.js Colormap module.</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">oliveR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="oliver" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#oliver" class="anchor"></a>oliveR</h1></div>
<p>Database access and measurement development for the Oliver SMS. The package is designed to work with the <a href="https://github.com/pocdata/oliver-opencpu-server-docker">oliver-opencpu-server-docker</a> and the <code>oliver_replica</code> psql database.</p>
<div id="prerequisites-for-mac-and-mac-ish-environments" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites-for-mac-and-mac-ish-environments" class="anchor"></a>Prerequisites for Mac and Mac-ish environments</h2>
<ol>
<li>A public/private key pair with the public key shared to <a href="mailto:mattbro@uw.edu">mattbro@uw.edu</a> and residing on the reverse tunnel target.</li>
<li>A valid username on the reverse tunnel target. Can be set by contacting <a href="mailto:mattbro@uw.edu">mattbro@uw.edu</a>.</li>
<li>Authy account information should be forwarded to \<a href="mailto:email%7Bmattbro@uw.edu">email{mattbro@uw.edu</a>} prior to trying to establish a connection to the replica with the command string or access will be denied. Access to <code>oliver_replica</code> requires two-factor authentication. Authy (\url{<a href="https://www.authy.com/" class="uri">https://www.authy.com/</a>}) is used for this purpose.</li>
<li>A connection to the <code>oliver_replica</code> database. This is accomplished with a complex <code>ssh</code> statement, a sample of which is as follows: <code>ssh -i /Users/mienkoja/.ssh/id_rsa -p 5431 -L 10.200.10.1:5432:oliver-replica.criploulbgnu.us-west-2.rds.amazonaws.com:5432 -N mienkoja@52.90.57.218</code>. This statement can be generated for a specific user from within oliveR using the <code><a href="reference/create_ssh_command.html">create_ssh_command()</a></code> function.</li>
<li>A functioning instance of <a href="https://github.com/pocdata/oliver-opencpu-server-docker">oliver-opencpu-server-docker</a>.</li>
<li>Unless you want to specify your credentials manually, the <code>build_all_metrics()</code> function is set to pull connection parameters for <code>oliver_replica</code> from the environment. These can be set according within your favorite shell environment <em>or</em> can be set within R using <code>Sys.setenv()</code> as shown below:</li>
</ol>
<pre><code>Sys.setenv(OLIVER_REPLICA_DBNAME = "oliver_replica"
           ,OLIVER_REPLICA_HOST = "10.200.10.1"
           ,OLIVER_REPLICA_USER = "mienkoja"
           ,OLIVER_REPLICA_PORT = "5432"
           ,OLIVER_REPLICA_PASSWORD = "my_password")</code></pre>
</div>
<div id="prerequisites-for-windows" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites-for-windows" class="anchor"></a>Prerequisites for Windows</h2>
<ul>
<li>Placeholder for Windows instructions</li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>oliveR can be installed from from github with:</p>
<p><code>{r, eval = FALSE} # install.packages("devtools") devtools::install_github("hadley/pkgdown")</code></p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The interaction between <a href="https://github.com/pocdata/oliver-opencpu-server-docker">oliver-opencpu-server-docker</a> and oliveR relies on the present of one or more “metric” objects. On the initial install of oliveR, no metric objects are present as the data contained within may be sensitive. The first time you load oliveR (and each time you want to refresh the metric objects), you should update the metric objects with:</p>
<p><code>{r, eval = FALSE} oliveR::build_all_metrics()</code></p>
<p>This will drop the objects into an <code>rds</code> formatted file in the oliveR directory. The objects are then loaded into the global environment with:</p>
<p><code>{r, eval = FALSE} oliveR::load_measurement_objects()</code></p>
<p>Metric objects are used within oliveR to create lists of metric information - values and geometry. This is accomplished with running methods from a <code>metric_group</code>. A <code>metric_group</code> object serves as a container for one or more metric objects. For our purposes we are currently only dealing with <code>metric_performance_provider</code> objects, an R6 object which currently contains two methods: 1. <code>get_value</code> (a method to produce a single numeric value for a given metric), and 2. <code>get_donut</code> (a method to produce svg geometry representing a donut plot. The function, <code>get_metric_list()</code>, is used to generate a nested list which contains the returns from the <code>get_value</code> and <code>get_donut</code> methods on all metric objects within a given metric group by:</p>
<p><code>{r, eval = FALSE} oliveR::get_metric_list(metric_group = my_metric_group, case_id = my_case_id)</code></p>
<p>There are multiple ways that this can be replicated within <a href="https://github.com/pocdata/oliver-opencpu-server-docker">oliver-opencpu-server-docker</a>. The following demonstrates how this can be accomplished to convert the list output of <code>get_metric_list</code> to json.</p>
<pre><code>curl http://localhost/ocpu/library/oliveR/R/get_metric_list/json -H "Content-Type: application/json" -d '{"case_id":my_case_id}'</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joe Mienko <br><small class="roles"> Author </small> </li>
<li>Erik Oien <br><small class="roles"> Author </small> </li>
<li>Jooree Ahn <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Joe Mienko, Erik Oien, Jooree Ahn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
